/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package lei.tqs.services;

import java.util.Arrays;
import java.util.List;
import lei.tqs.domain.DataWeatherBlock;
import org.junit.Test;
import static org.junit.Assert.*;
import org.junit.Before;
import org.junit.runner.RunWith;
import org.mockito.Mockito;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.TestConfiguration;
import org.springframework.boot.test.mock.mockito.MockBean;
import org.springframework.context.annotation.Bean;
import org.springframework.http.HttpEntity;
import org.springframework.http.HttpHeaders;
import org.springframework.http.MediaType;
import org.springframework.test.context.junit4.SpringRunner;
import org.springframework.web.client.RestClientException;
import org.springframework.web.client.RestTemplate;

@RunWith(SpringRunner.class)
public class ApixuUtilTest {
    
    @TestConfiguration
    static class DarkSkyUtilTestContextConfig {
        @Bean
        public ApixuUtil ApixuUtils() {return new ApixuUtil();}
    }
    
    @Autowired
    private ApixuUtil apixuUtil;
    
    @MockBean
    private RestTemplate restTemplate;
    static HttpHeaders headers = new HttpHeaders();
    static HttpEntity<String> entity;
    static {
        headers.setAccept(Arrays.asList(MediaType.APPLICATION_JSON));
        headers.add("user-agent", "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/54.0.2840.99 Safari/537.36");
        entity = new HttpEntity<>("parameters", headers);
    }
    
    @Before
    public void setUp() {
        apixuUtil.restTemplate = restTemplate;
        Mockito.when(
            restTemplate.getForObject(
               ApixuUtil.baseURL+"&q=40.640496,-8.6537841&dt=2019-05-01",
               String.class
            )
        ).thenReturn("{\"location\":{\"name\":\"Aveiro\",\"region\":\"Aveiro\",\"country\":\"Portugal\",\"lat\":40.64,\"lon\":-8.65,\"tz_id\":\"Europe/Lisbon\",\"localtime_epoch\":1556980218,\"localtime\":\"2019-05-04 15:30\"},\"forecast\":{\"forecastday\":[{\"date\":\"2019-05-01\",\"date_epoch\":1556668800,\"day\":{\"maxtemp_c\":19.9,\"maxtemp_f\":67.8,\"mintemp_c\":11.9,\"mintemp_f\":53.4,\"avgtemp_c\":17.3,\"avgtemp_f\":63.2,\"maxwind_mph\":15.2,\"maxwind_kph\":24.5,\"totalprecip_mm\":0.0,\"totalprecip_in\":0.0,\"avgvis_km\":10.0,\"avgvis_miles\":6.0,\"avghumidity\":76.0,\"condition\":{\"text\":\"Partly cloudy\",\"icon\":\"//cdn.apixu.com/weather/64x64/day/116.png\",\"code\":1003},\"uv\":0.0},\"astro\":{\"sunrise\":\"06:34 AM\",\"sunset\":\"08:30 PM\",\"moonrise\":\"05:15 AM\",\"moonset\":\"05:04 PM\",\"moon_phase\":\"Waning Crescent\",\"moon_illumination\":\"12\"},\"hour\":[{\"time_epoch\":1556665200,\"time\":\"2019-05-01 00:00\",\"temp_c\":12.7,\"temp_f\":54.9,\"is_day\":0,\"condition\":{\"text\":\"Partly cloudy\",\"icon\":\"//cdn.apixu.com/weather/64x64/night/116.png\",\"code\":1003},\"wind_mph\":6.0,\"wind_kph\":9.7,\"wind_degree\":358,\"wind_dir\":\"N\",\"pressure_mb\":1015.0,\"pressure_in\":30.4,\"precip_mm\":0.0,\"precip_in\":0.0,\"humidity\":88,\"cloud\":45,\"feelslike_c\":11.9,\"feelslike_f\":53.4,\"windchill_c\":11.9,\"windchill_f\":53.4,\"heatindex_c\":12.7,\"heatindex_f\":54.9,\"dewpoint_c\":10.8,\"dewpoint_f\":51.4,\"will_it_rain\":0,\"chance_of_rain\":\"0\",\"will_it_snow\":0,\"chance_of_snow\":\"0\",\"vis_km\":10.0,\"vis_miles\":6.0,\"gust_mph\":12.3,\"gust_kph\":19.8},{\"time_epoch\":1556668800,\"time\":\"2019-05-01 01:00\",\"temp_c\":12.4,\"temp_f\":54.4,\"is_day\":0,\"condition\":{\"text\":\"Partly cloudy\",\"icon\":\"//cdn.apixu.com/weather/64x64/night/116.png\",\"code\":1003},\"wind_mph\":6.2,\"wind_kph\":10.0,\"wind_degree\":356,\"wind_dir\":\"N\",\"pressure_mb\":1015.0,\"pressure_in\":30.4,\"precip_mm\":0.0,\"precip_in\":0.0,\"humidity\":90,\"cloud\":38,\"feelslike_c\":11.5,\"feelslike_f\":52.8,\"windchill_c\":11.5,\"windchill_f\":52.8,\"heatindex_c\":12.4,\"heatindex_f\":54.4,\"dewpoint_c\":10.8,\"dewpoint_f\":51.5,\"will_it_rain\":0,\"chance_of_rain\":\"1\",\"will_it_snow\":0,\"chance_of_snow\":\"0\",\"vis_km\":10.0,\"vis_miles\":6.0,\"gust_mph\":12.4,\"gust_kph\":19.9},{\"time_epoch\":1556672400,\"time\":\"2019-05-01 02:00\",\"temp_c\":12.2,\"temp_f\":53.9,\"is_day\":0,\"condition\":{\"text\":\"Partly cloudy\",\"icon\":\"//cdn.apixu.com/weather/64x64/night/116.png\",\"code\":1003},\"wind_mph\":6.3,\"wind_kph\":10.2,\"wind_degree\":354,\"wind_dir\":\"N\",\"pressure_mb\":1014.0,\"pressure_in\":30.4,\"precip_mm\":0.0,\"precip_in\":0.0,\"humidity\":92,\"cloud\":32,\"feelslike_c\":11.2,\"feelslike_f\":52.1,\"windchill_c\":11.2,\"windchill_f\":52.1,\"heatindex_c\":12.2,\"heatindex_f\":53.9,\"dewpoint_c\":10.9,\"dewpoint_f\":51.6,\"will_it_rain\":0,\"chance_of_rain\":\"1\",\"will_it_snow\":0,\"chance_of_snow\":\"0\",\"vis_km\":10.0,\"vis_miles\":6.0,\"gust_mph\":12.5,\"gust_kph\":20.0},{\"time_epoch\":1556676000,\"time\":\"2019-05-01 03:00\",\"temp_c\":11.9,\"temp_f\":53.4,\"is_day\":0,\"condition\":{\"text\":\"Partly cloudy\",\"icon\":\"//cdn.apixu.com/weather/64x64/night/116.png\",\"code\":1003},\"wind_mph\":6.5,\"wind_kph\":10.4,\"wind_degree\":351,\"wind_dir\":\"N\",\"pressure_mb\":1014.0,\"pressure_in\":30.4,\"precip_mm\":0.0,\"precip_in\":0.0,\"humidity\":93,\"cloud\":25,\"feelslike_c\":10.8,\"feelslike_f\":51.4,\"windchill_c\":10.8,\"windchill_f\":51.4,\"heatindex_c\":11.9,\"heatindex_f\":53.4,\"dewpoint_c\":10.9,\"dewpoint_f\":51.6,\"will_it_rain\":0,\"chance_of_rain\":\"0\",\"will_it_snow\":0,\"chance_of_snow\":\"0\",\"vis_km\":10.0,\"vis_miles\":6.0,\"gust_mph\":12.5,\"gust_kph\":20.2},{\"time_epoch\":1556679600,\"time\":\"2019-05-01 04:00\",\"temp_c\":12.0,\"temp_f\":53.7,\"is_day\":0,\"condition\":{\"text\":\"Partly cloudy\",\"icon\":\"//cdn.apixu.com/weather/64x64/night/116.png\",\"code\":1003},\"wind_mph\":6.7,\"wind_kph\":10.8,\"wind_degree\":353,\"wind_dir\":\"N\",\"pressure_mb\":1014.0,\"pressure_in\":30.4,\"precip_mm\":0.0,\"precip_in\":0.0,\"humidity\":93,\"cloud\":23,\"feelslike_c\":10.9,\"feelslike_f\":51.7,\"windchill_c\":10.9,\"windchill_f\":51.7,\"heatindex_c\":12.0,\"heatindex_f\":53.7,\"dewpoint_c\":11.0,\"dewpoint_f\":51.8,\"will_it_rain\":0,\"chance_of_rain\":\"1\",\"will_it_snow\":0,\"chance_of_snow\":\"0\",\"vis_km\":10.0,\"vis_miles\":6.0,\"gust_mph\":12.5,\"gust_kph\":20.2},{\"time_epoch\":1556683200,\"time\":\"2019-05-01 05:00\",\"temp_c\":12.2,\"temp_f\":53.9,\"is_day\":0,\"condition\":{\"text\":\"Partly cloudy\",\"icon\":\"//cdn.apixu.com/weather/64x64/night/116.png\",\"code\":1003},\"wind_mph\":6.9,\"wind_kph\":11.2,\"wind_degree\":355,\"wind_dir\":\"N\",\"pressure_mb\":1014.0,\"pressure_in\":30.4,\"precip_mm\":0.0,\"precip_in\":0.0,\"humidity\":93,\"cloud\":21,\"feelslike_c\":11.1,\"feelslike_f\":51.9,\"windchill_c\":11.1,\"windchill_f\":51.9,\"heatindex_c\":12.2,\"heatindex_f\":53.9,\"dewpoint_c\":11.1,\"dewpoint_f\":52.0,\"will_it_rain\":0,\"chance_of_rain\":\"1\",\"will_it_snow\":0,\"chance_of_snow\":\"0\",\"vis_km\":10.0,\"vis_miles\":6.0,\"gust_mph\":12.5,\"gust_kph\":20.2},{\"time_epoch\":1556686800,\"time\":\"2019-05-01 06:00\",\"temp_c\":12.3,\"temp_f\":54.1,\"is_day\":0,\"condition\":{\"text\":\"Partly cloudy\",\"icon\":\"//cdn.apixu.com/weather/64x64/night/116.png\",\"code\":1003},\"wind_mph\":7.2,\"wind_kph\":11.5,\"wind_degree\":356,\"wind_dir\":\"N\",\"pressure_mb\":1014.0,\"pressure_in\":30.4,\"precip_mm\":0.0,\"precip_in\":0.0,\"humidity\":93,\"cloud\":19,\"feelslike_c\":11.2,\"feelslike_f\":52.2,\"windchill_c\":11.2,\"windchill_f\":52.2,\"heatindex_c\":12.3,\"heatindex_f\":54.1,\"dewpoint_c\":11.2,\"dewpoint_f\":52.2,\"will_it_rain\":0,\"chance_of_rain\":\"0\",\"will_it_snow\":0,\"chance_of_snow\":\"0\",\"vis_km\":10.0,\"vis_miles\":6.0,\"gust_mph\":12.5,\"gust_kph\":20.2},{\"time_epoch\":1556690400,\"time\":\"2019-05-01 07:00\",\"temp_c\":13.8,\"temp_f\":56.8,\"is_day\":1,\"condition\":{\"text\":\"Partly cloudy\",\"icon\":\"//cdn.apixu.com/weather/64x64/day/116.png\",\"code\":1003},\"wind_mph\":7.9,\"wind_kph\":12.7,\"wind_degree\":351,\"wind_dir\":\"N\",\"pressure_mb\":1014.0,\"pressure_in\":30.4,\"precip_mm\":0.0,\"precip_in\":0.0,\"humidity\":87,\"cloud\":15,\"feelslike_c\":13.1,\"feelslike_f\":55.5,\"windchill_c\":13.1,\"windchill_f\":55.5,\"heatindex_c\":13.8,\"heatindex_f\":56.8,\"dewpoint_c\":11.5,\"dewpoint_f\":52.7,\"will_it_rain\":0,\"chance_of_rain\":\"1\",\"will_it_snow\":0,\"chance_of_snow\":\"0\",\"vis_km\":10.0,\"vis_miles\":6.0,\"gust_mph\":11.9,\"gust_kph\":19.2},{\"time_epoch\":1556694000,\"time\":\"2019-05-01 08:00\",\"temp_c\":15.3,\"temp_f\":59.5,\"is_day\":1,\"condition\":{\"text\":\"Partly cloudy\",\"icon\":\"//cdn.apixu.com/weather/64x64/day/116.png\",\"code\":1003},\"wind_mph\":8.6,\"wind_kph\":13.9,\"wind_degree\":346,\"wind_dir\":\"NNW\",\"pressure_mb\":1014.0,\"pressure_in\":30.4,\"precip_mm\":0.0,\"precip_in\":0.0,\"humidity\":80,\"cloud\":11,\"feelslike_c\":14.9,\"feelslike_f\":58.9,\"windchill_c\":14.9,\"windchill_f\":58.9,\"heatindex_c\":15.3,\"heatindex_f\":59.5,\"dewpoint_c\":11.8,\"dewpoint_f\":53.2,\"will_it_rain\":0,\"chance_of_rain\":\"1\",\"will_it_snow\":0,\"chance_of_snow\":\"0\",\"vis_km\":10.0,\"vis_miles\":6.0,\"gust_mph\":11.3,\"gust_kph\":18.2},{\"time_epoch\":1556697600,\"time\":\"2019-05-01 09:00\",\"temp_c\":16.8,\"temp_f\":62.2,\"is_day\":1,\"condition\":{\"text\":\"Partly cloudy\",\"icon\":\"//cdn.apixu.com/weather/64x64/day/116.png\",\"code\":1003},\"wind_mph\":9.4,\"wind_kph\":15.1,\"wind_degree\":340,\"wind_dir\":\"NNW\",\"pressure_mb\":1014.0,\"pressure_in\":30.4,\"precip_mm\":0.0,\"precip_in\":0.0,\"humidity\":74,\"cloud\":7,\"feelslike_c\":16.8,\"feelslike_f\":62.2,\"windchill_c\":16.8,\"windchill_f\":62.2,\"heatindex_c\":16.8,\"heatindex_f\":62.2,\"dewpoint_c\":12.1,\"dewpoint_f\":53.8,\"will_it_rain\":0,\"chance_of_rain\":\"0\",\"will_it_snow\":0,\"chance_of_snow\":\"0\",\"vis_km\":10.0,\"vis_miles\":6.0,\"gust_mph\":10.7,\"gust_kph\":17.3},{\"time_epoch\":1556701200,\"time\":\"2019-05-01 10:00\",\"temp_c\":17.7,\"temp_f\":63.9,\"is_day\":1,\"condition\":{\"text\":\"Partly cloudy\",\"icon\":\"//cdn.apixu.com/weather/64x64/day/116.png\",\"code\":1003},\"wind_mph\":10.4,\"wind_kph\":16.7,\"wind_degree\":336,\"wind_dir\":\"NNW\",\"pressure_mb\":1014.0,\"pressure_in\":30.4,\"precip_mm\":0.0,\"precip_in\":0.0,\"humidity\":70,\"cloud\":7,\"feelslike_c\":17.7,\"feelslike_f\":63.9,\"windchill_c\":17.7,\"windchill_f\":63.9,\"heatindex_c\":17.7,\"heatindex_f\":63.9,\"dewpoint_c\":12.2,\"dewpoint_f\":54.0,\"will_it_rain\":0,\"chance_of_rain\":\"1\",\"will_it_snow\":0,\"chance_of_snow\":\"0\",\"vis_km\":10.0,\"vis_miles\":6.0,\"gust_mph\":11.9,\"gust_kph\":19.1},{\"time_epoch\":1556704800,\"time\":\"2019-05-01 11:00\",\"temp_c\":18.7,\"temp_f\":65.6,\"is_day\":1,\"condition\":{\"text\":\"Partly cloudy\",\"icon\":\"//cdn.apixu.com/weather/64x64/day/116.png\",\"code\":1003},\"wind_mph\":11.3,\"wind_kph\":18.2,\"wind_degree\":332,\"wind_dir\":\"NNW\",\"pressure_mb\":1013.0,\"pressure_in\":30.4,\"precip_mm\":0.0,\"precip_in\":0.0,\"humidity\":67,\"cloud\":6,\"feelslike_c\":18.7,\"feelslike_f\":65.6,\"windchill_c\":18.7,\"windchill_f\":65.6,\"heatindex_c\":18.7,\"heatindex_f\":65.6,\"dewpoint_c\":12.3,\"dewpoint_f\":54.1,\"will_it_rain\":0,\"chance_of_rain\":\"1\",\"will_it_snow\":0,\"chance_of_snow\":\"0\",\"vis_km\":10.0,\"vis_miles\":6.0,\"gust_mph\":13.0,\"gust_kph\":20.9},{\"time_epoch\":1556708400,\"time\":\"2019-05-01 12:00\",\"temp_c\":19.6,\"temp_f\":67.3,\"is_day\":1,\"condition\":{\"text\":\"Partly cloudy\",\"icon\":\"//cdn.apixu.com/weather/64x64/day/116.png\",\"code\":1003},\"wind_mph\":12.3,\"wind_kph\":19.8,\"wind_degree\":328,\"wind_dir\":\"NNW\",\"pressure_mb\":1013.0,\"pressure_in\":30.4,\"precip_mm\":0.0,\"precip_in\":0.0,\"humidity\":63,\"cloud\":6,\"feelslike_c\":19.6,\"feelslike_f\":67.3,\"windchill_c\":19.6,\"windchill_f\":67.3,\"heatindex_c\":19.6,\"heatindex_f\":67.3,\"dewpoint_c\":12.4,\"dewpoint_f\":54.3,\"will_it_rain\":0,\"chance_of_rain\":\"0\",\"will_it_snow\":0,\"chance_of_snow\":\"0\",\"vis_km\":10.0,\"vis_miles\":6.0,\"gust_mph\":14.1,\"gust_kph\":22.7},{\"time_epoch\":1556712000,\"time\":\"2019-05-01 13:00\",\"temp_c\":19.7,\"temp_f\":67.5,\"is_day\":1,\"condition\":{\"text\":\"Partly cloudy\",\"icon\":\"//cdn.apixu.com/weather/64x64/day/116.png\",\"code\":1003},\"wind_mph\":13.3,\"wind_kph\":21.4,\"wind_degree\":329,\"wind_dir\":\"NNW\",\"pressure_mb\":1013.0,\"pressure_in\":30.4,\"precip_mm\":0.0,\"precip_in\":0.0,\"humidity\":62,\"cloud\":5,\"feelslike_c\":19.7,\"feelslike_f\":67.5,\"windchill_c\":19.7,\"windchill_f\":67.5,\"heatindex_c\":19.7,\"heatindex_f\":67.5,\"dewpoint_c\":12.2,\"dewpoint_f\":53.9,\"will_it_rain\":0,\"chance_of_rain\":\"1\",\"will_it_snow\":0,\"chance_of_snow\":\"0\",\"vis_km\":10.0,\"vis_miles\":6.0,\"gust_mph\":15.5,\"gust_kph\":25.0},{\"time_epoch\":1556715600,\"time\":\"2019-05-01 14:00\",\"temp_c\":19.8,\"temp_f\":67.6,\"is_day\":1,\"condition\":{\"text\":\"Partly cloudy\",\"icon\":\"//cdn.apixu.com/weather/64x64/day/116.png\",\"code\":1003},\"wind_mph\":14.2,\"wind_kph\":22.9,\"wind_degree\":330,\"wind_dir\":\"NNW\",\"pressure_mb\":1012.0,\"pressure_in\":30.4,\"precip_mm\":0.0,\"precip_in\":0.0,\"humidity\":60,\"cloud\":5,\"feelslike_c\":19.8,\"feelslike_f\":67.6,\"windchill_c\":19.8,\"windchill_f\":67.6,\"heatindex_c\":19.8,\"heatindex_f\":67.6,\"dewpoint_c\":11.9,\"dewpoint_f\":53.5,\"will_it_rain\":0,\"chance_of_rain\":\"1\",\"will_it_snow\":0,\"chance_of_snow\":\"0\",\"vis_km\":10.0,\"vis_miles\":6.0,\"gust_mph\":16.9,\"gust_kph\":27.2},{\"time_epoch\":1556719200,\"time\":\"2019-05-01 15:00\",\"temp_c\":19.9,\"temp_f\":67.8,\"is_day\":1,\"condition\":{\"text\":\"Partly cloudy\",\"icon\":\"//cdn.apixu.com/weather/64x64/day/116.png\",\"code\":1003},\"wind_mph\":15.2,\"wind_kph\":24.5,\"wind_degree\":330,\"wind_dir\":\"NNW\",\"pressure_mb\":1012.0,\"pressure_in\":30.4,\"precip_mm\":0.0,\"precip_in\":0.0,\"humidity\":59,\"cloud\":4,\"feelslike_c\":19.9,\"feelslike_f\":67.8,\"windchill_c\":19.9,\"windchill_f\":67.8,\"heatindex_c\":19.9,\"heatindex_f\":67.8,\"dewpoint_c\":11.7,\"dewpoint_f\":53.1,\"will_it_rain\":0,\"chance_of_rain\":\"0\",\"will_it_snow\":0,\"chance_of_snow\":\"0\",\"vis_km\":10.0,\"vis_miles\":6.0,\"gust_mph\":18.3,\"gust_kph\":29.5},{\"time_epoch\":1556722800,\"time\":\"2019-05-01 16:00\",\"temp_c\":19.3,\"temp_f\":66.7,\"is_day\":1,\"condition\":{\"text\":\"Partly cloudy\",\"icon\":\"//cdn.apixu.com/weather/64x64/day/116.png\",\"code\":1003},\"wind_mph\":14.5,\"wind_kph\":23.4,\"wind_degree\":333,\"wind_dir\":\"NNW\",\"pressure_mb\":1012.0,\"pressure_in\":30.4,\"precip_mm\":0.0,\"precip_in\":0.0,\"humidity\":61,\"cloud\":4,\"feelslike_c\":19.3,\"feelslike_f\":66.7,\"windchill_c\":19.3,\"windchill_f\":66.7,\"heatindex_c\":19.3,\"heatindex_f\":66.7,\"dewpoint_c\":11.6,\"dewpoint_f\":52.8,\"will_it_rain\":0,\"chance_of_rain\":\"1\",\"will_it_snow\":0,\"chance_of_snow\":\"0\",\"vis_km\":10.0,\"vis_miles\":6.0,\"gust_mph\":18.9,\"gust_kph\":30.4},{\"time_epoch\":1556726400,\"time\":\"2019-05-01 17:00\",\"temp_c\":18.6,\"temp_f\":65.5,\"is_day\":1,\"condition\":{\"text\":\"Partly cloudy\",\"icon\":\"//cdn.apixu.com/weather/64x64/day/116.png\",\"code\":1003},\"wind_mph\":13.9,\"wind_kph\":22.3,\"wind_degree\":335,\"wind_dir\":\"NNW\",\"pressure_mb\":1012.0,\"pressure_in\":30.4,\"precip_mm\":0.0,\"precip_in\":0.0,\"humidity\":63,\"cloud\":3,\"feelslike_c\":18.6,\"feelslike_f\":65.5,\"windchill_c\":18.6,\"windchill_f\":65.5,\"heatindex_c\":18.6,\"heatindex_f\":65.5,\"dewpoint_c\":11.4,\"dewpoint_f\":52.6,\"will_it_rain\":0,\"chance_of_rain\":\"1\",\"will_it_snow\":0,\"chance_of_snow\":\"0\",\"vis_km\":10.0,\"vis_miles\":6.0,\"gust_mph\":19.4,\"gust_kph\":31.2},{\"time_epoch\":1556730000,\"time\":\"2019-05-01 18:00\",\"temp_c\":18.0,\"temp_f\":64.4,\"is_day\":1,\"condition\":{\"text\":\"Partly cloudy\",\"icon\":\"//cdn.apixu.com/weather/64x64/day/116.png\",\"code\":1003},\"wind_mph\":13.2,\"wind_kph\":21.2,\"wind_degree\":338,\"wind_dir\":\"NNW\",\"pressure_mb\":1012.0,\"pressure_in\":30.3,\"precip_mm\":0.0,\"precip_in\":0.0,\"humidity\":65,\"cloud\":2,\"feelslike_c\":18.0,\"feelslike_f\":64.4,\"windchill_c\":18.0,\"windchill_f\":64.4,\"heatindex_c\":18.0,\"heatindex_f\":64.4,\"dewpoint_c\":11.3,\"dewpoint_f\":52.3,\"will_it_rain\":0,\"chance_of_rain\":\"0\",\"will_it_snow\":0,\"chance_of_snow\":\"0\",\"vis_km\":10.0,\"vis_miles\":6.0,\"gust_mph\":19.9,\"gust_kph\":32.0},{\"time_epoch\":1556733600,\"time\":\"2019-05-01 19:00\",\"temp_c\":16.9,\"temp_f\":62.4,\"is_day\":1,\"condition\":{\"text\":\"Partly cloudy\",\"icon\":\"//cdn.apixu.com/weather/64x64/day/116.png\",\"code\":1003},\"wind_mph\":12.0,\"wind_kph\":19.3,\"wind_degree\":344,\"wind_dir\":\"NNW\",\"pressure_mb\":1012.0,\"pressure_in\":30.4,\"precip_mm\":0.0,\"precip_in\":0.0,\"humidity\":68,\"cloud\":1,\"feelslike_c\":16.6,\"feelslike_f\":61.8,\"windchill_c\":16.6,\"windchill_f\":61.8,\"heatindex_c\":16.9,\"heatindex_f\":62.4,\"dewpoint_c\":10.9,\"dewpoint_f\":51.6,\"will_it_rain\":0,\"chance_of_rain\":\"1\",\"will_it_snow\":0,\"chance_of_snow\":\"0\",\"vis_km\":10.0,\"vis_miles\":6.0,\"gust_mph\":20.0,\"gust_kph\":32.2},{\"time_epoch\":1556737200,\"time\":\"2019-05-01 20:00\",\"temp_c\":15.8,\"temp_f\":60.4,\"is_day\":1,\"condition\":{\"text\":\"Sunny\",\"icon\":\"//cdn.apixu.com/weather/64x64/day/113.png\",\"code\":1000},\"wind_mph\":10.8,\"wind_kph\":17.4,\"wind_degree\":350,\"wind_dir\":\"N\",\"pressure_mb\":1013.0,\"pressure_in\":30.4,\"precip_mm\":0.0,\"precip_in\":0.0,\"humidity\":71,\"cloud\":1,\"feelslike_c\":15.1,\"feelslike_f\":59.2,\"windchill_c\":15.1,\"windchill_f\":59.2,\"heatindex_c\":15.8,\"heatindex_f\":60.4,\"dewpoint_c\":10.5,\"dewpoint_f\":50.9,\"will_it_rain\":0,\"chance_of_rain\":\"0\",\"will_it_snow\":0,\"chance_of_snow\":\"0\",\"vis_km\":10.0,\"vis_miles\":6.0,\"gust_mph\":20.1,\"gust_kph\":32.3},{\"time_epoch\":1556740800,\"time\":\"2019-05-01 21:00\",\"temp_c\":14.7,\"temp_f\":58.5,\"is_day\":0,\"condition\":{\"text\":\"Clear\",\"icon\":\"//cdn.apixu.com/weather/64x64/night/113.png\",\"code\":1000},\"wind_mph\":9.6,\"wind_kph\":15.5,\"wind_degree\":356,\"wind_dir\":\"N\",\"pressure_mb\":1013.0,\"pressure_in\":30.4,\"precip_mm\":0.0,\"precip_in\":0.0,\"humidity\":74,\"cloud\":0,\"feelslike_c\":13.7,\"feelslike_f\":56.7,\"windchill_c\":13.7,\"windchill_f\":56.7,\"heatindex_c\":14.7,\"heatindex_f\":58.5,\"dewpoint_c\":10.1,\"dewpoint_f\":50.2,\"will_it_rain\":0,\"chance_of_rain\":\"0\",\"will_it_snow\":0,\"chance_of_snow\":\"0\",\"vis_km\":10.0,\"vis_miles\":6.0,\"gust_mph\":20.1,\"gust_kph\":32.4},{\"time_epoch\":1556744400,\"time\":\"2019-05-01 22:00\",\"temp_c\":14.4,\"temp_f\":58.0,\"is_day\":0,\"condition\":{\"text\":\"Clear\",\"icon\":\"//cdn.apixu.com/weather/64x64/night/113.png\",\"code\":1000},\"wind_mph\":9.2,\"wind_kph\":14.9,\"wind_degree\":239,\"wind_dir\":\"WSW\",\"pressure_mb\":1013.0,\"pressure_in\":30.4,\"precip_mm\":0.0,\"precip_in\":0.0,\"humidity\":74,\"cloud\":2,\"feelslike_c\":13.4,\"feelslike_f\":56.2,\"windchill_c\":13.4,\"windchill_f\":56.2,\"heatindex_c\":14.4,\"heatindex_f\":58.0,\"dewpoint_c\":9.9,\"dewpoint_f\":49.9,\"will_it_rain\":0,\"chance_of_rain\":\"0\",\"will_it_snow\":0,\"chance_of_snow\":\"0\",\"vis_km\":10.0,\"vis_miles\":6.0,\"gust_mph\":19.4,\"gust_kph\":31.2},{\"time_epoch\":1556748000,\"time\":\"2019-05-01 23:00\",\"temp_c\":14.2,\"temp_f\":57.5,\"is_day\":0,\"condition\":{\"text\":\"Partly cloudy\",\"icon\":\"//cdn.apixu.com/weather/64x64/night/116.png\",\"code\":1003},\"wind_mph\":8.9,\"wind_kph\":14.3,\"wind_degree\":123,\"wind_dir\":\"ESE\",\"pressure_mb\":1013.0,\"pressure_in\":30.4,\"precip_mm\":0.0,\"precip_in\":0.0,\"humidity\":75,\"cloud\":3,\"feelslike_c\":13.2,\"feelslike_f\":55.7,\"windchill_c\":13.2,\"windchill_f\":55.7,\"heatindex_c\":14.2,\"heatindex_f\":57.5,\"dewpoint_c\":9.8,\"dewpoint_f\":49.6,\"will_it_rain\":0,\"chance_of_rain\":\"1\",\"will_it_snow\":0,\"chance_of_snow\":\"0\",\"vis_km\":10.0,\"vis_miles\":6.0,\"gust_mph\":18.6,\"gust_kph\":30.0}]}]}}");
        Mockito.when(
            restTemplate.getForObject(
               ApixuUtil.baseURL+"&q=0.0,0.0&dt=2019-05-01",
               String.class
            )
        ).thenThrow(new RestClientException(""));
    }
    
    @Test
    public void testgetWeatherFromCoordinates() {
        List<DataWeatherBlock> result = apixuUtil.getWeatherFromCoordinates(40.640496,-8.6537841, 1556668800, 1556668800);
        assertNotEquals(0, result.size());
        result.forEach(b -> assertNotEquals(null, b));
    }
    
    @Test
    public void testRestClientException() {
        List<DataWeatherBlock> result = apixuUtil.getWeatherFromCoordinates(0.0, 0.0, 1556668800, 1556668800);
        assertEquals(0, result.size());
    }
}
